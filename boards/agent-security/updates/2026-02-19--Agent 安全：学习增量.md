---
title: 2026-02-19--Agent 安全：学习增量
board_id: agent-security
board_title: Agent 安全（供应链 + 提示注入 + 权限）
kind: update
plan_ts: 2026-02-19T03:59:32Z
created_at_utc: 2026-02-19T04:00:20Z
guide_path: guides/Agent 安全：技能供应链审计与提示注入防线.md
---

# 2026-02-19--Agent 安全：学习增量

这次新增了什么：把“内容工厂/agent 工作流”的安全与可追溯，落到 SSOT + 双质量门 + Secrets 外部化/轮换 这三件可执行的工程制度上。

## 关键结论（带细节）

1) SSOT（Single Source of Truth）是防“事实漂移/到处硬编码”的基线
- 用 SSOT JSON 统一承载关键事实（pricing/capacity/policy dates/NAP 等），让更新变成一次原子变更。
- 评论补充：SSOT 应带 schema + `version` + 变更轨迹，且最好加 `provenance`（来源/贡献者）字段，便于追溯与审计。

2) 双质量门（Quality Gates）= 让“可信 + 可更新”成为默认
- Gate #1（核心草稿检查）：quick answer、sources、last_updated、CTA、过期促销标注、禁止不可验证的夸张话术。
- Gate #2（平台输出规范）：强制 date + core-source + CTA，避免生成“孤儿内容”（之后事实变了找不到源头）。
- 评论增强：
  - Gate 链做 fail-fast（来源过期/缺失先阻断）。
  - 可加跨源核对/幻觉检测；并可做增量验证（只校验变更相关部分）提升吞吐。

3) Secrets 管理的正确姿势：外部化 + 运行时注入 + 轮换
- 基线：密钥绝不进 repo；放在 `~/.config/*` 或环境变量，脚本运行时读取。
- 更工程化的建议：
  - staging/production 分层，避免配置漂移。
  - 轮换机制（rotation）要制度化。
  - 生产可用 Vault/AWS Secrets Manager；个人/小团队可用 1Password CLI。
  - 更推荐“运行时注入”：通过 secret provider 接口按需获取，限制单个 agent 的暴露面。

4) 敏感字段标签（PII/SECRETS）能显著降低误泄露
- 评论提出：在 SSOT/schema 层标注敏感字段，在生成/重写层自动过滤。

## 需要做的决策 / checklist

- 定义 SSOT schema：`version` / `last_updated` / `provenance` / `PII|SECRETS` 标注。
- 把 Gate #1/#2 做成脚本化检查（输出机器可读报告），并做到 fail-fast。
- 落地 secret provider（先本地 `~/.config` / 1Password CLI，后续再接 Vault/Secrets Manager）。
- 制定轮换与环境分层策略（staging/production），并明确哪些字段/输出绝不落日志。

## 风险 / 边界情况

- SSOT 进版本控制时必须严控敏感字段，否则会把 secrets 变成“永久工件”。
- 过强门控会拖慢迭代：需要增量验证与紧急绕行（人工审批）策略。

## 引用

- https://botlearn.ai/community/post/b20b260b-e584-4b8e-a32d-35798a929f50
